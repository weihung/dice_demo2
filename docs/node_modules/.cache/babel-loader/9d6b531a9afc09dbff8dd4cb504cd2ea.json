{"ast":null,"code":"import _defineProperty from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import SelecteDice from'./component/SelectDice';import Balance from'../component/Balance';import BetTimes from'../component/BetTimes';import Odds from'../component/Odds';import Chance from'../component/Chance';import Bet from'../component/Bet';import History from'./component/History';import logo from'../images/two_dice.png';import'../css/Main.css';import Scatter from'../eos/Scatter';var chances=[2.78,5.56,8.33,11.11,13.89,16.67,13.89,11.11,8.33,5.56,2.78];var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);function Main(props){var _this;_classCallCheck(this,Main);_this=_possibleConstructorReturn(this,_getPrototypeOf(Main).call(this,props));_this.handleAutoBetChange=function(checked){_this.setState(_objectSpread({},_this.state,{autoBet:checked}));};_this.handleOnBet=function(_ref){var bet=_ref.bet,autoBet=_ref.autoBet;var callApi=!_this.state.callApi;_this.shouldStop=!callApi;_this.autoBet=autoBet;_this.setState(_objectSpread({},_this.state,{disableBet:!autoBet,callApi:callApi}));_this.startBet(bet);};_this.handleOnChange=function(value){if(value<1)return;var selectedCount=0;var chance=0;for(var i=0;i<11;i++){if(value&1<<i){selectedCount++;chance+=chances[i];}}if(selectedCount>10)return;_this.setState(_objectSpread({},_this.state,{value:value,chance:chance,odds:98/chance}));};_this.state={value:1,chance:chances[0],odds:98/chances[0],disableBet:false,history:[],amount:'0.0000 EOS',betTimes:0,amountHistory:[],callApi:false};_this.bet=0.01;_this.autoBet=false;return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.getBalance();_this2.getHistory();},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.shouldStop=true;clearInterval(this.interval);}},{key:\"startBet\",value:function startBet(bet){var _this3=this;Scatter.twoBet(bet,this.state.value,function(result){_this3.setState(_objectSpread({},_this3.state,{betTimes:_this3.state.betTimes+1}));if(result===500)_this3.shouldStop=true;if(!_this3.shouldStop&&_this3.autoBet){_this3.startBet(bet);return;}_this3.setState(_objectSpread({},_this3.state,{disableBet:false,callApi:false}));});}},{key:\"getBalance\",value:function getBalance(callback){var _this4=this;Scatter.getBalance(function(result){var r=result[0].split(\" \",1);var amount=parseFloat(r);var amountHistory=[];try{amountHistory=_this4.state.amountHistory;}catch(e){console.log(e);}amountHistory.push(amount);_this4.setState(_objectSpread({},_this4.state,{amount:result[0],amountHistory:amountHistory}));if(amount<parseFloat(_this4.bet)){_this4.shouldStop=true;}try{callback(result[0]);}catch(e){}});}},{key:\"getHistory\",value:function getHistory(){var _this5=this;Scatter.getTwoHistoryIndex(function(row){var start=row[0].key-14;Scatter.getTwoHistory(start,function(result){var history=[];result.rows.forEach(function(element){var numbers=[];for(var i=0;i<12;i++){if(element.number&1<<i){numbers.push(1);}else{numbers.push(0);}}history.push({amount:element.bet/10000,number:numbers,RandomResult:element.result+2,winamount:element.win/10000});});_this5.setState(_objectSpread({},_this5.state,{history:history}));});});}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(\"div\",{className:\"div1\"},React.createElement(\"div\",{className:\"div21\"},React.createElement(\"div\",{className:\"div31\"},React.createElement(\"img\",{src:logo,height:80,alt:\"Two Dice logo\",className:\"GameLogo\"}),React.createElement(Balance,{value:this.state.amount}),React.createElement(BetTimes,{value:this.state.betTimes}),React.createElement(SelecteDice,{value:this.state.value,onChange:this.handleOnChange}),React.createElement(Bet,{value:this.bet,disableBet:this.state.disableBet,callApi:this.state.callApi,onBet:this.handleOnBet,onChange:function onChange(value){_this6.bet=value;}})),React.createElement(\"div\",{className:\"div32\"},React.createElement(\"div\",null,React.createElement(Odds,{odds:this.state.odds.toFixed(2)})),React.createElement(\"div\",null,React.createElement(Chance,{value:this.state.chance}))),React.createElement(\"div\",{className:\"div33\"},React.createElement(History,{value:this.state.history}))));}}]);return Main;}(React.Component);export{Main as default};","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/two_dice/TwoDice.js"],"names":["React","SelecteDice","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","chances","Main","props","handleAutoBetChange","checked","setState","state","autoBet","handleOnBet","bet","callApi","shouldStop","disableBet","startBet","handleOnChange","value","selectedCount","chance","i","odds","history","amount","betTimes","amountHistory","interval","setInterval","getBalance","getHistory","clearInterval","twoBet","result","callback","r","split","parseFloat","e","console","log","push","getTwoHistoryIndex","row","start","key","getTwoHistory","rows","forEach","element","numbers","number","RandomResult","winamount","win","toFixed","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SelecteDice from './component/SelectDice';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/two_dice.png';\n\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nconst chances = [2.78, 5.56, 8.33, 11.11, 13.89, 16.67, 13.89, 11.11, 8.33, 5.56, 2.78 ]\n\nexport default class Main extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: 1,\n      chance: chances[0],\n      odds: 98 / chances[0],\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n    this.bet = 0.01\n    this.autoBet = false\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n  }\n\n  handleAutoBetChange = (checked) => {\n    this.setState({...this.state, autoBet: checked});\n  }\n\n  startBet(bet) {\n    Scatter.twoBet(bet, this.state.value, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  getHistory() {\n    Scatter.getTwoHistoryIndex( row =>{\n      const start = row[0].key - 14;\n      Scatter.getTwoHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          var numbers = []\n          for (var i = 0; i < 12; i++) { \n            if (element.number & (1 << i)){\n              numbers.push(1);\n            } else {\n              numbers.push(0);\n            }\n          }\n          \n          history.push({\n            amount: element.bet / 10000,\n            number: numbers,\n            RandomResult: element.result + 2,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n\n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  handleOnChange = value => {\n    if (value < 1) return\n    var selectedCount = 0;\n    var chance = 0;\n    for (var i = 0; i < 11; i++) { \n      if (value & (1 << i)) {\n        selectedCount++\n        chance += chances[i]\n      }\n    }\n    if (selectedCount > 10) return\n    this.setState({...this.state, value, chance, odds: (98 / chance)})\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Two Dice logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <SelecteDice value={this.state.value} onChange={this.handleOnChange}/>\n            <Bet value={this.bet} \n              disableBet={this.state.disableBet} \n              callApi={this.state.callApi} \n              onBet={this.handleOnBet} \n              onChange={(value) => {\n                this.bet = value;\n              }}\n            />\n          </div>\n          <div className=\"div32\">\n            <div>\n              < Odds odds={this.state.odds.toFixed(2)} />\n            </div>\n            <div>\n              <Chance value={this.state.chance} />\n            </div>\n          </div>\n          <div className=\"div33\">\n              <History value={this.state.history} />\n          </div>\n        </div>\n      \n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}