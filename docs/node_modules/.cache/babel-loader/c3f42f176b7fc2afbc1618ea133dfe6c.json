{"ast":null,"code":"import _defineProperty from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import Slider from'./component/Slider';import Balance from'../component/Balance';import BetTimes from'../component/BetTimes';import Odds from'../component/Odds';import Chance from'../component/Chance';import Bet from'../component/Bet';import History from'./component/History';import logo from'../images/etheroll.png';import'../css/Main.css';import Scatter from'../eos/Scatter';var Etheroll=/*#__PURE__*/function(_Component){_inherits(Etheroll,_Component);function Etheroll(props){var _this;_classCallCheck(this,Etheroll);_this=_possibleConstructorReturn(this,_getPrototypeOf(Etheroll).call(this,props));_this.onChange=function(value){_this.setState({value:value,odds:98/value});};_this.handleOnBet=function(_ref){var bet=_ref.bet,autoBet=_ref.autoBet;var callApi=!_this.state.callApi;_this.shouldStop=!callApi;_this.autoBet=autoBet;_this.setState(_objectSpread({},_this.state,{disableBet:!autoBet,callApi:callApi}));_this.startBet(bet);};_this.bet=0.01;_this.autoBet=false;_this.state={value:50,odds:1.98,disableBet:false,history:[],amount:'0.0000 EOS',betTimes:0,amountHistory:[],callApi:false};return _this;}_createClass(Etheroll,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.getBalance();_this2.getHistory();},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.shouldStop=true;clearInterval(this.interval);}},{key:\"startBet\",value:function startBet(bet){var _this3=this;Scatter.etherollBet(bet,this.state.value,function(result){_this3.setState(_objectSpread({},_this3.state,{betTimes:_this3.state.betTimes+1}));if(result===500)_this3.shouldStop=true;if(!_this3.shouldStop&&_this3.autoBet){_this3.startBet(bet);return;}_this3.setState(_objectSpread({},_this3.state,{disableBet:false,callApi:false}));});}},{key:\"getBalance\",value:function getBalance(callback){var _this4=this;Scatter.getBalance(function(result){var r=result[0].split(\" \",1);var amount=parseFloat(r);var amountHistory=[];try{amountHistory=_this4.state.amountHistory;}catch(e){console.log(e);}amountHistory.push(amount);_this4.setState(_objectSpread({},_this4.state,{amount:result[0],amountHistory:amountHistory}));if(amount<parseFloat(_this4.bet)){_this4.shouldStop=true;}try{callback(result[0]);}catch(e){}});}},{key:\"getHistory\",value:function getHistory(){var _this5=this;Scatter.getEtherollHistoryIndex(function(row){var start=row[0].key-14;Scatter.getEtherollHistory(start,function(result){var history=[];result.rows.forEach(function(element){history.push({amount:element.bet/10000,number:element.number,RandomResult:element.result,winamount:element.win/10000});});_this5.setState(_objectSpread({},_this5.state,{history:history}));});});}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(\"div\",{className:\"div1\"},React.createElement(\"div\",{className:\"div21\"},React.createElement(\"div\",{className:\"div31\"},React.createElement(\"img\",{src:logo,height:80,alt:\"Etheroll logo\",className:\"GameLogo\"}),React.createElement(Balance,{value:this.state.amount}),React.createElement(BetTimes,{value:this.state.betTimes}),React.createElement(\"div\",{style:{marginTop:'20px'}},React.createElement(Slider,{onChange:this.onChange})),React.createElement(Bet,{value:this.bet,disableBet:this.state.disableBet,callApi:this.state.callApi,onBet:this.handleOnBet,onChange:function onChange(value){_this6.bet=value;}})),React.createElement(\"div\",{className:\"div32\"},React.createElement(\"div\",null,React.createElement(Odds,{odds:this.state.odds.toFixed(2)})),React.createElement(\"div\",null,React.createElement(Chance,{value:this.state.value}))),React.createElement(\"div\",{className:\"div33\"},React.createElement(History,{value:this.state.history}))));}}]);return Etheroll;}(Component);export default Etheroll;","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/etheroll/Etheroll.js"],"names":["React","Component","Slider","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","Etheroll","props","onChange","value","setState","odds","handleOnBet","bet","autoBet","callApi","state","shouldStop","disableBet","startBet","history","amount","betTimes","amountHistory","interval","setInterval","getBalance","getHistory","clearInterval","etherollBet","result","callback","r","split","parseFloat","e","console","log","push","getEtherollHistoryIndex","row","start","key","getEtherollHistory","rows","forEach","element","number","RandomResult","winamount","win","marginTop","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Slider from './component/Slider' \nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/etheroll.png';\n\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nclass Etheroll extends Component {\n  constructor(props){\n    super(props)\n    this.bet = 0.01\n    this.autoBet = false\n\n    this.state = {\n      value: 50,\n      odds: 1.98,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    }\n  }\n  \n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n  }\n\n  onChange = value => {\n    this.setState({ value, odds: 98 / value})\n  }\n\n  startBet(bet) {\n    Scatter.etherollBet(bet, this.state.value, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  getHistory() {\n    Scatter.getEtherollHistoryIndex( row =>{\n      const start = row[0].key - 14;\n      Scatter.getEtherollHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n  \n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Etheroll logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <div style={{marginTop:'20px'}}>\n              <Slider onChange={this.onChange} />\n            </div>\n            \n            <Bet value={this.bet} disableBet={this.state.disableBet} callApi={this.state.callApi} onBet={this.handleOnBet} onChange={(value) => {\n              this.bet = value;\n            }}/>\n          </div>\n        \n          <div className=\"div32\">\n            <div>\n              < Odds odds={this.state.odds.toFixed(2)} />\n            </div>\n            <div>\n              <Chance value={this.state.value} />\n            </div>\n          </div>\n\n          <div className=\"div33\">\n            <History value={this.state.history} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Etheroll"]},"metadata":{},"sourceType":"module"}