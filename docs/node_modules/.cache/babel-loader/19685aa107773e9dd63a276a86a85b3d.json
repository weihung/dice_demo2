{"ast":null,"code":"import _defineProperty from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import SelectCoin from'./component/SelectCoin';import Balance from'../component/Balance';import BetTimes from'../component/BetTimes';import Odds from'../component/Odds';import Chance from'../component/Chance';import Bet from'../component/Bet';import History from'./component/History';import logo from'../images/coin_flip.png';import'../css/Main.css';import Scatter from'../eos/Scatter';var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);function Main(props){var _this;_classCallCheck(this,Main);_this=_possibleConstructorReturn(this,_getPrototypeOf(Main).call(this,props));_this.handleAutoBetChange=function(checked){_this.setState(_objectSpread({},_this.state,{autoBet:checked}));};_this.handleOnBet=function(_ref){var bet=_ref.bet,autoBet=_ref.autoBet;var callApi=!_this.state.callApi;_this.shouldStop=!callApi;_this.autoBet=autoBet;_this.setState(_objectSpread({},_this.state,{disableBet:!autoBet,callApi:callApi}));_this.startBet(bet);};_this.handleOnChange=function(value){_this.setState(_objectSpread({},_this.state,{value:value}));};_this.bet=0.01;_this.autoBet=false;_this.state={value:0,disableBet:false,history:[],amount:'0.0000 EOS',betTimes:0,amountHistory:[],callApi:false};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.getBalance();_this2.getHistory();},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.shouldStop=true;clearInterval(this.interval);}},{key:\"startBet\",value:function startBet(bet){var _this3=this;Scatter.coinBet(bet,this.state.value,function(result){_this3.setState(_objectSpread({},_this3.state,{betTimes:_this3.state.betTimes+1}));if(result===500)_this3.shouldStop=true;if(!_this3.shouldStop&&_this3.autoBet){_this3.startBet(bet);return;}_this3.setState(_objectSpread({},_this3.state,{disableBet:false,callApi:false}));});}},{key:\"getBalance\",value:function getBalance(callback){var _this4=this;Scatter.getBalance(function(result){var r=result[0].split(\" \",1);var amount=parseFloat(r);var amountHistory=[];try{amountHistory=_this4.state.amountHistory;}catch(e){console.log(e);}amountHistory.push(amount);_this4.setState(_objectSpread({},_this4.state,{amount:result[0],amountHistory:amountHistory}));if(amount<parseFloat(_this4.bet)){_this4.shouldStop=true;}try{callback(result[0]);}catch(e){}});}},{key:\"getHistory\",value:function getHistory(){var _this5=this;Scatter.getCoinHistoryIndex(function(row){var start=row[0].key-14;Scatter.getCoinHistory(start,function(result){var history=[];result.rows.forEach(function(element){history.push({amount:element.bet/10000,number:element.number,RandomResult:element.result,winamount:element.win/10000});});_this5.setState(_objectSpread({},_this5.state,{history:history}));});});}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(\"div\",{className:\"div1\"},React.createElement(\"div\",{className:\"div21\"},React.createElement(\"div\",{className:\"div31\"},React.createElement(\"img\",{src:logo,height:80,alt:\"Two Dice logo\",className:\"GameLogo\"}),React.createElement(Balance,{value:this.state.amount}),React.createElement(BetTimes,{value:this.state.betTimes}),React.createElement(SelectCoin,{value:this.state.value,onChange:this.handleOnChange}),React.createElement(Bet,{value:this.bet,disableBet:this.state.disableBet,callApi:this.state.callApi,onBet:this.handleOnBet,onChange:function onChange(value){_this6.bet=value;}})),React.createElement(\"div\",{className:\"div32\"},React.createElement(\"div\",null,React.createElement(Odds,{odds:1.98})),React.createElement(\"div\",null,React.createElement(Chance,{value:50}))),React.createElement(\"div\",{className:\"div33\"},React.createElement(History,{value:this.state.history}))));}}]);return Main;}(React.Component);export{Main as default};","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/coin_filp/CoinFlip.js"],"names":["React","SelectCoin","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","Main","props","handleAutoBetChange","checked","setState","state","autoBet","handleOnBet","bet","callApi","shouldStop","disableBet","startBet","handleOnChange","value","history","amount","betTimes","amountHistory","interval","setInterval","getBalance","getHistory","clearInterval","coinBet","result","callback","r","split","parseFloat","e","console","log","push","getCoinHistoryIndex","row","start","key","getCoinHistory","rows","forEach","element","number","RandomResult","winamount","win","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SelectCoin from './component/SelectCoin';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/coin_flip.png';\n\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nexport default class Main extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.bet = 0.01\n    this.autoBet = false\n\n    this.state = {\n      value: 0,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n  }\n\n  handleAutoBetChange = (checked) => {\n    this.setState({...this.state, autoBet: checked});\n  }\n\n  startBet(bet) {\n    Scatter.coinBet(bet, this.state.value, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  getHistory() {\n    Scatter.getCoinHistoryIndex( row =>{\n      const start = row[0].key - 14;\n      Scatter.getCoinHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          \n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n\n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  handleOnChange = value => {\n    this.setState({...this.state, value})\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Two Dice logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <SelectCoin value={this.state.value} onChange={this.handleOnChange}/>\n            <Bet value={this.bet} \n              disableBet={this.state.disableBet} \n              callApi={this.state.callApi} \n              onBet={this.handleOnBet} \n              onChange={(value) => {\n                this.bet = value;\n              }}\n            />\n          </div>\n          <div className=\"div32\">\n            <div>\n              < Odds odds={1.98} />\n            </div>\n            <div>\n              <Chance value={50} />\n            </div>\n          </div>\n          <div className=\"div33\">\n              <History value={this.state.history} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}