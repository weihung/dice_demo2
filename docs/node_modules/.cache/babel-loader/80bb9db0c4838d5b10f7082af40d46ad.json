{"ast":null,"code":"import _defineProperty from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React from'react';import SelectDice from'./component/SelectDice';import Balance from'../component/Balance';import BetTimes from'../component/BetTimes';import Odds from'../component/Odds';import Chance from'../component/Chance';import Bet from'../component/Bet';import History from'./component/History';import logo from'../images/dice.png';import'../css/Main.css';import Scatter from'../eos/Scatter';var odds=[0,5.88,2.94,1.96,1.47,1.16];var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);function Main(props){var _this;_classCallCheck(this,Main);_this=_possibleConstructorReturn(this,_getPrototypeOf(Main).call(this,props));_this.handleOnBet=function(_ref){var bet=_ref.bet,autoBet=_ref.autoBet;var callApi=!_this.state.callApi;_this.shouldStop=!callApi;_this.autoBet=autoBet;_this.setState(_objectSpread({},_this.state,{disableBet:!autoBet,callApi:callApi}));_this.startBet(bet);};_this.bet=0.01;_this.autoBet=false;_this.state={selected:1,selectedCount:1,disableBet:false,history:[],amount:'0.0000 EOS',betTimes:0,amountHistory:[],callApi:false};return _this;}_createClass(Main,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.interval=setInterval(function(){_this2.getBalance();_this2.getHistory();},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.shouldStop=true;clearInterval(this.interval);// clearTimeout(this.timeout)\n}},{key:\"getBalance\",value:function getBalance(callback){var _this3=this;Scatter.getBalance(function(result){var r=result[0].split(\" \",1);var amount=parseFloat(r);var amountHistory=[];try{amountHistory=_this3.state.amountHistory;}catch(e){console.log(e);}amountHistory.push(amount);_this3.setState(_objectSpread({},_this3.state,{amount:result[0],amountHistory:amountHistory}));if(amount<parseFloat(_this3.bet)){_this3.shouldStop=true;}try{callback(result[0]);}catch(e){}});}},{key:\"startBet\",value:function startBet(bet){var _this4=this;Scatter.diceBet(bet,this.state.selected,function(result){_this4.setState(_objectSpread({},_this4.state,{betTimes:_this4.state.betTimes+1}));if(result===500)_this4.shouldStop=true;if(!_this4.shouldStop&&_this4.autoBet){_this4.startBet(bet);return;}_this4.setState(_objectSpread({},_this4.state,{disableBet:false,callApi:false}));});}},{key:\"getHistory\",value:function getHistory(){var _this5=this;Scatter.getDiceHistoryIndex(function(row){var start=row[0].key-15;Scatter.getDiceHistory(start,function(result){var history=[];result.rows.forEach(function(element){var number=[];for(var i=0;i<6;i++){if(element.number&1<<i){number.push(1);}else{number.push(0);}}history.push({amount:element.bet/10000,number:number,RandomResult:element.result+1,winamount:element.win/10000});});_this5.setState(_objectSpread({},_this5.state,{history:history}));});});}},{key:\"render\",value:function render(){var _this6=this;return React.createElement(\"div\",{className:\"div1\"},React.createElement(\"div\",{className:\"div21\"},React.createElement(\"div\",{className:\"div31\"},React.createElement(\"img\",{src:logo,height:80,alt:\"Dice logo\",className:\"GameLogo\"}),React.createElement(Balance,{value:this.state.amount}),React.createElement(BetTimes,{value:this.state.betTimes}),React.createElement(\"div\",{style:{display:'grid'}},React.createElement(SelectDice,{selected:this.state.selected,onChange:function onChange(selectResult){_this6.setState(_objectSpread({},_this6.state,{},selectResult));}})),React.createElement(Bet,{value:this.bet,disableBet:this.state.disableBet,callApi:this.state.callApi,onBet:this.handleOnBet,onChange:function onChange(value){_this6.bet=value;}})),React.createElement(\"div\",{className:\"div32\"},React.createElement(\"div\",null,React.createElement(Odds,{odds:odds[this.state.selectedCount]})),React.createElement(\"div\",null,React.createElement(Chance,{value:(100*this.state.selectedCount/6).toFixed(2)}))),React.createElement(\"div\",{className:\"div33\"},React.createElement(History,{value:this.state.history}))));}}]);return Main;}(React.Component);export{Main as default};","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/dice/Dice.js"],"names":["React","SelectDice","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","odds","Main","props","handleOnBet","bet","autoBet","callApi","state","shouldStop","setState","disableBet","startBet","selected","selectedCount","history","amount","betTimes","amountHistory","interval","setInterval","getBalance","getHistory","clearInterval","callback","result","r","split","parseFloat","e","console","log","push","diceBet","getDiceHistoryIndex","row","start","key","getDiceHistory","rows","forEach","element","number","i","RandomResult","winamount","win","display","selectResult","value","toFixed","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SelectDice from './component/SelectDice';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/dice.png';\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nconst odds = [0, 5.88, 2.94, 1.96, 1.47, 1.16]\n\nexport default class Main extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.bet = 0.01\n    this.autoBet = false\n\n    this.state = {\n      selected: 1,\n      selectedCount: 1,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n    // clearTimeout(this.timeout)\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  startBet(bet) {\n    Scatter.diceBet(bet, this.state.selected, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getHistory() {\n    Scatter.getDiceHistoryIndex(row => {\n      const start = row[0].key - 15;\n      Scatter.getDiceHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          var number = []\n          for (var i = 0; i < 6; i++) { \n            if (element.number& (1 << i)){\n              number.push(1);\n            } else {\n              number.push(0);\n            }\n          }\n          history.push({\n            amount: element.bet / 10000,\n            number,\n            RandomResult: element.result + 1,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n\n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Dice logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <div style={{display:'grid'}}>\n              <SelectDice selected={this.state.selected} onChange=\n                {\n                  (selectResult) => {\n                    this.setState({...this.state, ...selectResult});\n              }}/>\n            </div>\n            \n            <Bet value={this.bet} disableBet={this.state.disableBet} callApi={this.state.callApi} onBet={this.handleOnBet} onChange={(value) => {\n              this.bet = value;\n            }}/>\n          </div>\n          <div className=\"div32\">\n            <div>\n              < Odds odds={odds[this.state.selectedCount]} />\n            </div>\n            <div>\n              <Chance value={(100 * this.state.selectedCount / 6).toFixed(2)} />\n            </div>\n          </div>\n          <div className=\"div33\">\n              <History value={this.state.history} />\n          </div>\n        </div>\n      \n        {/* <div className=\"div22\">\n          <Chart value={this.state.amountHistory} />\n        </div> */}\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}