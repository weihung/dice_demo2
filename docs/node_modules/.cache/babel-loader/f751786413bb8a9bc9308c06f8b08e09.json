{"ast":null,"code":"import _defineProperty from \"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/coin_filp/CoinFlip.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport SelectCoin from './component/SelectCoin';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\nimport logo from '../images/coin_flip.png';\nimport '../css/Main.css';\nimport Scatter from '../eos/Scatter';\nexport default class Main extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleAutoBetChange = checked => {\n      this.setState(_objectSpread({}, this.state, {\n        autoBet: checked\n      }));\n    };\n\n    this.handleOnBet = ({\n      bet,\n      autoBet\n    }) => {\n      var callApi = !this.state.callApi;\n      this.shouldStop = !callApi;\n      this.autoBet = autoBet;\n      this.setState(_objectSpread({}, this.state, {\n        disableBet: !autoBet,\n        callApi: callApi\n      }));\n      this.startBet(bet);\n    };\n\n    this.handleOnChange = value => {\n      this.setState(_objectSpread({}, this.state, {\n        value\n      }));\n    };\n\n    this.bet = 0.01;\n    this.autoBet = false;\n    this.state = {\n      value: 0,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval);\n  }\n\n  startBet(bet) {\n    Scatter.coinBet(bet, this.state.value, result => {\n      this.setState(_objectSpread({}, this.state, {\n        betTimes: this.state.betTimes + 1\n      }));\n      if (result === 500) this.shouldStop = true;\n\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n\n      this.setState(_objectSpread({}, this.state, {\n        disableBet: false,\n        callApi: false\n      }));\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1);\n      const amount = parseFloat(r);\n      var amountHistory = [];\n\n      try {\n        amountHistory = this.state.amountHistory;\n      } catch (e) {\n        console.log(e);\n      }\n\n      amountHistory.push(amount);\n      this.setState(_objectSpread({}, this.state, {\n        amount: result[0],\n        amountHistory\n      }));\n\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n\n      try {\n        callback(result[0]);\n      } catch (e) {}\n    });\n  }\n\n  getHistory() {\n    Scatter.getCoinHistoryIndex(row => {\n      const start = row[0].key - 14;\n      Scatter.getCoinHistory(start, result => {\n        var history = [];\n        result.rows.forEach(element => {\n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000\n          });\n        });\n        this.setState(_objectSpread({}, this.state, {\n          history\n        }));\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"div1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"div21\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"div31\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      height: 80,\n      alt: \"Two Dice logo\",\n      className: \"GameLogo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }), React.createElement(Balance, {\n      value: this.state.amount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(BetTimes, {\n      value: this.state.betTimes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(SelectCoin, {\n      value: this.state.value,\n      onChange: this.handleOnChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }), React.createElement(Bet, {\n      value: this.bet,\n      disableBet: this.state.disableBet,\n      callApi: this.state.callApi,\n      onBet: this.handleOnBet,\n      onChange: value => {\n        this.bet = value;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"div32\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(Odds, {\n      odds: 1.98,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, React.createElement(Chance, {\n      value: 50,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"div33\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(History, {\n      value: this.state.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }))));\n  }\n\n}","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/coin_filp/CoinFlip.js"],"names":["React","SelectCoin","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","Main","Component","constructor","props","handleAutoBetChange","checked","setState","state","autoBet","handleOnBet","bet","callApi","shouldStop","disableBet","startBet","handleOnChange","value","history","amount","betTimes","amountHistory","componentDidMount","interval","setInterval","getBalance","getHistory","componentWillUnmount","clearInterval","coinBet","result","callback","r","split","parseFloat","e","console","log","push","getCoinHistoryIndex","row","start","key","getCoinHistory","rows","forEach","element","number","RandomResult","winamount","win","render"],"mappings":"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","sourcesContent":["import React from 'react';\nimport SelectCoin from './component/SelectCoin';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/coin_flip.png';\n\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nexport default class Main extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.bet = 0.01\n    this.autoBet = false\n\n    this.state = {\n      value: 0,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n  }\n\n  handleAutoBetChange = (checked) => {\n    this.setState({...this.state, autoBet: checked});\n  }\n\n  startBet(bet) {\n    Scatter.coinBet(bet, this.state.value, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  getHistory() {\n    Scatter.getCoinHistoryIndex( row =>{\n      const start = row[0].key - 14;\n      Scatter.getCoinHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          \n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n\n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  handleOnChange = value => {\n    this.setState({...this.state, value})\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Two Dice logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <SelectCoin value={this.state.value} onChange={this.handleOnChange}/>\n            <Bet value={this.bet} \n              disableBet={this.state.disableBet} \n              callApi={this.state.callApi} \n              onBet={this.handleOnBet} \n              onChange={(value) => {\n                this.bet = value;\n              }}\n            />\n          </div>\n          <div className=\"div32\">\n            <div>\n              < Odds odds={1.98} />\n            </div>\n            <div>\n              <Chance value={50} />\n            </div>\n          </div>\n          <div className=\"div33\">\n              <History value={this.state.history} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}"]},"metadata":{},"sourceType":"module"}