{"ast":null,"code":"import _defineProperty from \"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/etheroll/Etheroll.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { Component } from 'react';\nimport Slider from './component/Slider';\nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\nimport logo from '../images/etheroll.png';\nimport '../css/Main.css';\nimport Scatter from '../eos/Scatter';\n\nclass Etheroll extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onChange = value => {\n      this.setState({\n        value,\n        odds: 98 / value\n      });\n    };\n\n    this.handleOnBet = ({\n      bet,\n      autoBet\n    }) => {\n      var callApi = !this.state.callApi;\n      this.shouldStop = !callApi;\n      this.autoBet = autoBet;\n      this.setState(_objectSpread({}, this.state, {\n        disableBet: !autoBet,\n        callApi: callApi\n      }));\n      this.startBet(bet);\n    };\n\n    this.bet = 0.01;\n    this.autoBet = false;\n    this.state = {\n      value: 50,\n      odds: 1.98,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    };\n  }\n\n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000);\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval);\n  }\n\n  startBet(bet) {\n    Scatter.etherollBet(bet, this.state.value, result => {\n      this.setState(_objectSpread({}, this.state, {\n        betTimes: this.state.betTimes + 1\n      }));\n      if (result === 500) this.shouldStop = true;\n\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n\n      this.setState(_objectSpread({}, this.state, {\n        disableBet: false,\n        callApi: false\n      }));\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1);\n      const amount = parseFloat(r);\n      var amountHistory = [];\n\n      try {\n        amountHistory = this.state.amountHistory;\n      } catch (e) {\n        console.log(e);\n      }\n\n      amountHistory.push(amount);\n      this.setState(_objectSpread({}, this.state, {\n        amount: result[0],\n        amountHistory\n      }));\n\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n\n      try {\n        callback(result[0]);\n      } catch (e) {}\n    });\n  }\n\n  getHistory() {\n    Scatter.getEtherollHistoryIndex(row => {\n      const start = row[0].key - 14;\n      Scatter.getEtherollHistory(start, result => {\n        var history = [];\n        result.rows.forEach(element => {\n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000\n          });\n        });\n        this.setState(_objectSpread({}, this.state, {\n          history\n        }));\n      });\n    });\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"div1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"div21\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"div31\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: logo,\n      height: 80,\n      alt: \"Etheroll logo\",\n      className: \"GameLogo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }), React.createElement(Balance, {\n      value: this.state.amount,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(BetTimes, {\n      value: this.state.betTimes,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        marginTop: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(Slider, {\n      onChange: this.onChange,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    })), React.createElement(Bet, {\n      value: this.bet,\n      disableBet: this.state.disableBet,\n      callApi: this.state.callApi,\n      onBet: this.handleOnBet,\n      onChange: value => {\n        this.bet = value;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"div32\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }, React.createElement(Odds, {\n      odds: this.state.odds.toFixed(2),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Chance, {\n      value: this.state.value,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"div33\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(History, {\n      value: this.state.history,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default Etheroll;","map":{"version":3,"sources":["/Users/weihung/Documents/workspace/dice/frontend/dice-demo/src/etheroll/Etheroll.js"],"names":["React","Component","Slider","Balance","BetTimes","Odds","Chance","Bet","History","logo","Scatter","Etheroll","constructor","props","onChange","value","setState","odds","handleOnBet","bet","autoBet","callApi","state","shouldStop","disableBet","startBet","history","amount","betTimes","amountHistory","componentDidMount","interval","setInterval","getBalance","getHistory","componentWillUnmount","clearInterval","etherollBet","result","callback","r","split","parseFloat","e","console","log","push","getEtherollHistoryIndex","row","start","key","getEtherollHistory","rows","forEach","element","number","RandomResult","winamount","win","render","marginTop","toFixed"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport Slider from './component/Slider' \nimport Balance from '../component/Balance';\nimport BetTimes from '../component/BetTimes';\nimport Odds from '../component/Odds';\nimport Chance from '../component/Chance';\nimport Bet from '../component/Bet';\nimport History from './component/History';\n\nimport logo from '../images/etheroll.png';\n\nimport '../css/Main.css';\n\nimport Scatter from '../eos/Scatter'\n\nclass Etheroll extends Component {\n  constructor(props){\n    super(props)\n    this.bet = 0.01\n    this.autoBet = false\n\n    this.state = {\n      value: 50,\n      odds: 1.98,\n      disableBet: false,\n      history: [],\n      amount: '0.0000 EOS',\n      betTimes: 0,\n      amountHistory: [],\n      callApi: false\n    }\n  }\n  \n  componentDidMount() {\n    this.interval = setInterval(() => {\n      this.getBalance();\n      this.getHistory();\n    }, 1000)\n  }\n\n  componentWillUnmount() {\n    this.shouldStop = true;\n    clearInterval(this.interval)\n  }\n\n  onChange = value => {\n    this.setState({ value, odds: 98 / value})\n  }\n\n  startBet(bet) {\n    Scatter.etherollBet(bet, this.state.value, (result) => {\n      this.setState({...this.state, betTimes: this.state.betTimes + 1});\n      if (result === 500) this.shouldStop = true;\n      if (!this.shouldStop && this.autoBet) {\n        this.startBet(bet);\n        return;\n      }\n      this.setState({...this.state, \n        disableBet: false,\n        callApi: false,\n      });\n    });\n  }\n\n  getBalance(callback) {\n    Scatter.getBalance(result => {\n      const r = result[0].split(\" \", 1)\n      const amount = parseFloat(r)\n      var amountHistory = [];\n      try {\n        amountHistory = this.state.amountHistory\n      } catch (e) {\n        console.log(e);\n      }\n      amountHistory.push(amount)\n      this.setState({...this.state, amount: result[0], amountHistory});\n      if (amount < parseFloat(this.bet)) {\n        this.shouldStop = true;\n      }\n      try {\n        callback(result[0]);\n      } catch (e) {\n\n      }\n    })\n  }\n\n  getHistory() {\n    Scatter.getEtherollHistoryIndex( row =>{\n      const start = row[0].key - 14;\n      Scatter.getEtherollHistory(start, result => {\n        var history = []\n        result.rows.forEach(element => {\n          history.push({\n            amount: element.bet / 10000,\n            number: element.number,\n            RandomResult: element.result,\n            winamount: element.win / 10000,\n          })\n        })\n        this.setState({...this.state, \n          history,\n        });\n      })\n    });\n  }\n  \n  handleOnBet = ({bet, autoBet}) => {\n    var callApi = !this.state.callApi;\n    this.shouldStop = !callApi;\n    this.autoBet = autoBet;\n    this.setState({...this.state, \n      disableBet: !autoBet,\n      callApi: callApi,\n    });\n    this.startBet(bet)\n  }\n\n  render() {\n    return (\n      <div className=\"div1\">\n        <div className=\"div21\">\n          <div className=\"div31\">\n            <img src={logo} height={80} alt=\"Etheroll logo\" className=\"GameLogo\"/>\n            <Balance value={this.state.amount} />\n            <BetTimes value={this.state.betTimes} />\n            <div style={{marginTop:'20px'}}>\n              <Slider onChange={this.onChange} />\n            </div>\n            \n            <Bet value={this.bet} disableBet={this.state.disableBet} callApi={this.state.callApi} onBet={this.handleOnBet} onChange={(value) => {\n              this.bet = value;\n            }}/>\n          </div>\n        \n          <div className=\"div32\">\n            <div>\n              < Odds odds={this.state.odds.toFixed(2)} />\n            </div>\n            <div>\n              <Chance value={this.state.value} />\n            </div>\n          </div>\n\n          <div className=\"div33\">\n            <History value={this.state.history} />\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default Etheroll"]},"metadata":{},"sourceType":"module"}